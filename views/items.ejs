<%- include('partials/header') %>

<div class="section">
  <div class="container">
    <div class="row">
      <div class="col s12 m10 offset-m1 l8 offset-l2">
        <div class="card white z-depth-2" style="padding: 30px; border-radius: 12px;">

          <h5 class="center-align" style="margin-bottom: 30px;">Browse Items</h5>

          <form method="GET" action="/items">
            <div class="input-field">
              <input id="search" type="text" name="search" value="<%= searchQuery || '' %>">
              <label for="search">Search by item title</label>
            </div>
            <div class="right-align">
              <button class="btn green darken-1 waves-effect waves-light" type="submit">
                Search
              </button>
            </div>
          </form>

          <div class="row" style="margin-top: 30px;">
            <% if (items.length > 0) { %>
              <% items.forEach(item => { %>
                <div class="col s12 m6">
                  <div class="card z-depth-1">
                    <div class="card-image">
                      <img src="<%= item.imageUrl %>" alt="<%= item.title %>" style="height: 200px; object-fit: cover;">
                    </div>
                    <div class="card-content">
                      <span class="card-title"><%= item.title %></span>
                      <p><%= item.description %></p>
                    </div>
                    <div class="card-action">
                      <small>Category: <%= item.category %></small>
                    </div>
                  </div>
                </div>
              <% }) %>
            <% } else { %>
              <p class="center-align grey-text">No items found.</p>
            <% } %>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
